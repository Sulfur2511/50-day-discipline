<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>50 Day Discipline</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#3B82F6">
  <style>
    body { margin:0; font-family: 'Helvetica Neue', Arial, sans-serif; background:#f5f5f5; color:#222; padding-bottom: 100px; }
    header {
      background:#3B82F6;
      color:#fff;
      padding:1.5rem;
      text-align:center;
      font-size:1.5rem;
      box-shadow:0 2px 6px rgba(0,0,0,0.2);
    }
    .progress-bar {
      width:90%;
      background:#e0e0e0;
      border-radius:25px;
      margin:1.5rem auto;
      height:25px;
      overflow:hidden;
      box-shadow:inset 0 1px 3px rgba(0,0,0,0.3);
    }
    .progress {
      height:100%;
      background:linear-gradient(to right,#3B82F6,#EF4444);
      width:0;
      transition:width 0.3s ease;
    }
    .checklist {
      padding:1rem;
    }
    .checklist label {
      display:flex;
      align-items:center;
      margin:0.8rem 0;
      background:#fff;
      padding:0.8rem;
      border-radius:12px;
      box-shadow:0 2px 4px rgba(0,0,0,0.1);
      font-size:1.2rem;
    }
    .checklist input[type="checkbox"] {
      transform: scale(1.5);
      margin-right:15px;
    }
    .nav {
      position:fixed;
      bottom:0;
      width:100%;
      display:flex;
      justify-content:space-around;
      background:#3B82F6;
      padding:0.8rem 0;
      box-shadow:0 -2px 6px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
    }
    .nav.hidden-nav {
      transform: translateY(100%);
    }
    .nav button {
      background:none;
      border:none;
      color:#fff;
      font-size:1.3rem;
      padding:0.8rem 1rem;
      border-radius:10px;
      transition: background 0.2s;
    }
    .nav button:hover {
      background:rgba(255,255,255,0.2);
    }
    .hidden { display:none; }
    textarea {
      width:90%;
      margin:1rem;
      border-radius:12px;
      border:1px solid #ccc;
      padding:0.8rem;
      font-size:1rem;
      box-shadow:inset 0 1px 3px rgba(0,0,0,0.1);
    }
    input[type="file"] {
      margin: 1rem;
      font-size: 1rem;
    }
    button {
      font-size:1rem;
      padding:0.6rem 1rem;
      border-radius:8px;
      border:none;
      background:#3B82F6;
      color:#fff;
      margin-top:0.5rem;
    }
  </style>
</head>
<body>
<header>
  <h1>50 Day Discipline</h1>
  <p id="dayCounter">Day 1 / 50</p>
  <p id="streakCounter">ðŸ”¥ Streak: 0</p>
</header>
<div class="progress-bar">
  <div class="progress" id="progress"></div>
</div>
<div id="homeTab" class="tab">
  <div class="checklist" id="taskList"></div>
</div>
<div id="logTab" class="tab hidden">
  <h2 style="text-align:center;">Log Metrics</h2>
  <div style="padding:1rem;">
    <label>Weight (lbs): <input type="number" id="weightInput" style="font-size:1.2rem; padding:0.3rem;"></label>
    <button onclick="saveWeight()">Save Weight</button>
    <br><br>
    <label>Water (oz): <span id="waterDisplay">0</span>/100</label>
    <button onclick="addWater(25)">+25 oz</button>
  </div>
</div>
<div id="journalTab" class="tab hidden">
  <h2 style="text-align:center;">Journal</h2>
  <textarea id="journalEntry" rows="5" placeholder="3 things Iâ€™m grateful for, 1 win, 1 improvement..."></textarea>
  <input type="file" id="journalPhoto" accept="image/*">
  <button style="margin:1rem;" onclick="saveJournal()">Save Entry</button>
</div>
<div id="statsTab" class="tab hidden">
  <h2 style="text-align:center;">Stats</h2>
  <div style="padding:1rem;">
    <p id="weightHistory">Weight history: None yet</p>
    <p id="streakHistory">Current Streak: 0 days</p>
  </div>
</div>
<div class="nav" id="bottomNav">
  <button onclick="showTab('homeTab')">Home</button>
  <button onclick="showTab('logTab')">Log</button>
  <button onclick="showTab('journalTab')">Journal</button>
  <button onclick="showTab('statsTab')">Stats</button>
</div>
<script>
const tasks = [
  "Strength Workout (20 min)",
  "Workout (20 min)",
  "Fasting",
  "Healthy Diet",
  "Water (100 oz)",
  "Sleep 7+ hrs",
  "Read 11 Pages",
  "Journal",
  "Progress Picture",
  "Daily Review"
];
let completed = JSON.parse(localStorage.getItem('completedTasks')) || [];
let streak = parseInt(localStorage.getItem('streak')) || 0;
let day = parseInt(localStorage.getItem('day')) || 1;
function renderTasks() {
  const taskList = document.getElementById('taskList');
  taskList.innerHTML = '';
  tasks.forEach((task, index) => {
    const checked = completed.includes(index) ? 'checked' : '';
    taskList.innerHTML += `<label><input type="checkbox" onchange="toggleTask(${index})" ${checked}> ${task}</label>`;
  });
  updateProgress();
}
function toggleTask(index) {
  if (completed.includes(index)) {
    completed = completed.filter(i => i !== index);
  } else {
    completed.push(index);
  }
  localStorage.setItem('completedTasks', JSON.stringify(completed));
  updateProgress();
}
function updateProgress() {
  const progress = document.getElementById('progress');
  const percent = (completed.length / tasks.length) * 100;
  progress.style.width = percent + '%';
  if (percent === 100) {
    incrementStreak();
  }
}
function incrementStreak() {
  streak++;
  localStorage.setItem('streak', streak);
  document.getElementById('streakCounter').textContent = `ðŸ”¥ Streak: ${streak}`;
}
function resetDaily() {
  completed = [];
  localStorage.setItem('completedTasks', JSON.stringify(completed));
  day++;
  if(day > 50) day = 50;
  localStorage.setItem('day', day);
  document.getElementById('dayCounter').textContent = `Day ${day} / 50`;
  renderTasks();
}
function showTab(tabId) {
  document.querySelectorAll('.tab').forEach(tab => tab.classList.add('hidden'));
  document.getElementById(tabId).classList.remove('hidden');
}
function addWater(amount) {
  let water = parseInt(localStorage.getItem('water')) || 0;
  water += amount;
  if (water > 100) water = 100;
  localStorage.setItem('water', water);
  document.getElementById('waterDisplay').textContent = water;
}
function saveWeight() {
  const weight = document.getElementById('weightInput').value;
  let history = JSON.parse(localStorage.getItem('weightHistory')) || [];
  history.push({day: day, weight: weight});
  localStorage.setItem('weightHistory', JSON.stringify(history));
  alert('Weight saved!');
  document.getElementById('weightHistory').textContent = `Weight history: ${history.map(h => `Day ${h.day}: ${h.weight}lbs`).join(', ')}`;
}
function saveJournal() {
  const entry = document.getElementById('journalEntry').value;
  const photoInput = document.getElementById('journalPhoto');
  if(photoInput.files && photoInput.files[0]) {
    const reader = new FileReader();
    reader.onload = function(e) {
      localStorage.setItem('journalPhoto' + day, e.target.result);
    };
    reader.readAsDataURL(photoInput.files[0]);
  }
  localStorage.setItem('journal' + day, entry);
  alert('Journal saved with photo (if selected)!');
}

// Auto-hide nav on scroll
let lastScrollY = window.scrollY;
window.addEventListener('scroll', () => {
  const nav = document.getElementById('bottomNav');
  if (window.scrollY > lastScrollY) {
    nav.classList.add('hidden-nav');
  } else {
    nav.classList.remove('hidden-nav');
  }
  lastScrollY = window.scrollY;
});

document.addEventListener('DOMContentLoaded', () => {
  renderTasks();
  document.getElementById('waterDisplay').textContent = localStorage.getItem('water') || 0;
  document.getElementById('streakCounter').textContent = `ðŸ”¥ Streak: ${streak}`;
  document.getElementById('dayCounter').textContent = `Day ${day} / 50`;
});
</script>
</body>
</html>

